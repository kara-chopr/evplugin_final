<app-loader *ngIf="loader"></app-loader>
<div class="container">
    <p-toast position="center"></p-toast>
    <div class="row">
      <div class="col-sm-12 col-md-12
         col-xs-12">
        <div class="multistepform-steps margin_top">
  
          <ul>
            <li [ngClass]="{'firstlevel':firstlevelflag}">Basic Info</li>
            <li [ngClass]="{'secondlevel':secondlevelflag}">Other Info</li>
  
          </ul>
  
        </div>
      </div>
    </div>
    <!--Select Type Forms Starts  here -->
    <div class="row">
      <div class="  ui-md-12 ui-sm-12 
           ui-lg-12">
  
        <div class="listing_tab" *ngIf="multistepformsteps">
  
          <div class="basic_info">
            <div class="basicinfo_heading">
              <h3 style="margin-top:10px; text-align:center; letter-spacing: 1px;"><span style="color: #de1515"
                >S</span>elect Business Type</h3>
            </div>
            <div class="basic_infoselection" *ngIf="businessServiceResponses && businessServiceResponses.success">
              <ul>
                <li *ngFor="let businessServiceResponse  of  businessServiceResponses.success"
                >
               
                  <label (click)="activebussinesCatgray(businessServiceResponse)"
                  *ngIf="businessServiceResponse.type_name !=='All'">
                    <input type="radio" name="solarpanel" value="offgrid" />
                    <img src="https://api.evplugincharge.com{{businessServiceResponse.type_icon}}">
                    <p class="offgrid-text" [ngClass]="{'activeTabButton': activebusineescatgries == businessServiceResponse.type_name}">
                      {{businessServiceResponse.type_name}}</p>
                  </label>
                 
                </li>
               
                <!-- <li>
                  <label (click)="activebussinesCatgray('Restaurant')">
                    <input type="radio" name="solarpanel" value="offgrid" />
                    <img src="assets/restaurant-icon-2.png">
                    <p class="offgrid-text" [ngClass]="{'activeTabButton': activebusineescatgries == 'Restaurant'}">Restaurant</p>
                  </label>
                </li>
                <li>
                  <label (click)="activebussinesCatgray('Mall')">
                    <input type="radio" name="solarpanel" value="offgrid" />
                    <img src="assets/mall.png">
                    <p class="offgrid-text" [ngClass]="{'activeTabButton': activebusineescatgries == 'Mall'}">Mall</p>
                  </label>
                </li>
                <li>
                  <label (click)="activebussinesCatgray('Hotel')">
                    <input type="radio" name="solarpanel" value="offgrid" />
                    <img src="assets/images.jpg">
                    <p class="offgrid-text" [ngClass]="{'activeTabButton': activebusineescatgries == 'Hotel'}">Hotel</p>
                  </label>
                </li>
                <li>
                  <label (click)="activebussinesCatgray('Parking')">
                    <input type="radio" name="solarpanel" value="offgrid" />
                    <img src="assets/finalparking.png">
                    <p class="offgrid-text" [ngClass]="{'activeTabButton': activebusineescatgries == 'Parking'}">Parking</p>
                  </label>
                </li> -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--Select Type Forms Ends  here -->
    <!--First Step Forms Starts  here -->
  
    <div class="form_start">
      <form [formGroup]="listingForm" (ngSubmit)="onSubmitlistingForm()"   method="post" enctype="multipart/form-data" novalidate>
        <div class="listing_form" *ngIf="multistepformflagstep1">
          <div class="row">
            <div class=" col-md-6 col-sm-6
                          col-xs-12">
              <!-- <h6 class="fontcolor">Business Name</h6> -->
              <mat-form-field>
                <input matInput type="text" min="0"  placeholder="Enter Business Name" 
                formControlName="business_name"
                >
               
               </mat-form-field>  
               <div class="errormesage marginupper" *ngIf="!listingForm.controls['business_name'].valid
               && listingForm.controls['business_name'].touched">
                 <p>*Fields Required</p>
               </div>       
            </div>
  
  
  
  
  
            <div class="col-md-6 col-sm-6 col-xs-12">
                <!-- <h6 class="fontcolor">Business Address</h6> -->
                <mat-form-field>
                    <input matInput type="text" min="0"  placeholder="Enter Business Address" 
                    formControlName="address"
                    >
                   
                   </mat-form-field>  
              
                   <div class="errormesage marginupper" *ngIf="!listingForm.controls['address'].valid
                   && listingForm.controls['address'].touched">
                     <p>*Fields Are Required</p>
                   </div>    
            </div>
          </div>
  
          <div class="row">
            <div class="col-md-12">
              <!-- <h6 class="fontcolor">Contact Person</h6> -->
            </div>
          </div>
          <div class="row">
            <div class="  col-md-3 col-sm-3
                                       col-xs-12">
                
                                       <mat-form-field >
                                          <input matInput type="text"  placeholder="Name" 
                                          formControlName="pname"
                                          >
                                         
                    </mat-form-field> 
                    <div class="errormesage marginupper" *ngIf="!listingForm.controls['pname'].valid
                    && listingForm.controls['pname'].touched">
                      <p>*Fields Are Required</p>
                    </div>   
            </div>
            <div class=" col-md-3 col-sm-3 col-xs-12">
                <mat-form-field >
                    <input matInput type="text"  placeholder="Email" 
                    formControlName="pemail"
                    >
                    
  
  
                   </mat-form-field>  
                   <div class="errormesage marginupper" *ngIf="!listingForm.controls['pemail'].valid
  && listingForm.controls['pemail'].touched">
    <p>*Fields Are Required &  Required Full Email Address</p>
  </div>  
            </div>
            <div class=" col-sm-3 col-md-3 col-xs-12">
              
              <mat-form-field >
                  <input matInput  min="0"  placeholder="Landline" 
                  formControlName="plandline" max="12"
                  type = "tel" maxlength="12F"
                 >   
                
                 </mat-form-field> 
  
                 <div class="errormesage marginupper" *ngIf="!listingForm.controls['plandline'].valid
                 && listingForm.controls['plandline'].touched">
                   <p>*Fields Are Required</p>
                 </div>   
  
  
            </div>
            <div class="  col-md-3 col-sm-3 col-xs-12">
                <mat-form-field >
                    <input matInput formControlName="pmobile" maxlength="10" 
                    placeholder="Mobile" (change)="showotppassword()"
                     (keypress)=_keyPress($event)>
                    <mat-error *ngIf="listingForm.get('pmobile').hasError('required')">
                      Please fill out this field.
                    </mat-error>
                  
                  </mat-form-field>   
                    <!-- <input matInput type="tel" min="0" #number (keyup)=" return  isNumberKey($event)" maxlength="10"
                     placeholder="Mobile" formControlName="pmobile" (change)="showotppassword()">  -->
                    
                   <!-- </mat-form-field>   
                   <!-- <div class="errormesage marginupper" *ngIf="!listingForm.controls['pmobile'].valid
                   && listingForm.controls['pmobile'].touched">
                     <p>*Fields Are Required</p>
                   </div>           -->
            </div>
  
          </div>
          <!-- <div class="row" *ngIf="otppasswordFlag">
            <div class="col-md-3">
              <div class="otppassword">
                <input type="text" class="contact_listing" placeholder="OTP Password" #otpMatced
                (change)="otpChecked(otpMatced.value)"  />
              </div>
            </div>
            <div class="col-md-3" *ngIf="resendOtpFlag">
              <div class="resendotp">
               <button type="button" class="resend_password"
               (click)= "showotppassword();hideresendButton()">Resend OTP</button>
              </div>
            </div>
  
          </div> -->
          
  
          <div class="row">
            <div class="col-md-4 col-xs-12 col-sm-4">
              <div class="contact-form">
                <p>Opentime</p>
                <select class="select-open" name="first" formControlName="open_time">
                  <option *ngFor="let o of options" [disabled]="contentEditable">
                    {{o.name}}
                  </option>
                </select>
                <div class="checkboxfalseshowError" *ngIf="!contentEditable">
                  <div class="errormesage" *ngIf="!listingForm.controls['open_time'].valid
                && listingForm.controls['open_time'].touched">
                  <p>*Fields Are Required</p>
                </div>
                </div>
              </div>
            </div>
            <div class="  col-sm-4 col-xs-12 col-md-4">
              <div class="contact-form">
                <p>Closetime</p>
                <select class="select-open" name="first" formControlName="close_time">
                  <option *ngFor="let o of options" [disabled]="contentEditable">
                    {{o.name}}
                  </option>
                </select>
                <div class="checkboxfalseshowError" *ngIf="!contentEditable">
                  <div class="errormesage" *ngIf="!listingForm.controls['close_time'].valid
                && listingForm.controls['close_time'].touched">
                  <p>*Fields Are Required</p>
                </div>
                </div>
              </div>
            </div>
            <div class="  col-md-4 col-xs-12 col-sm-4">
              <div class="checkbox24">
                <mat-checkbox (change)="toggleEditable($event)" [disabled]="disable24checkbox"
                formControlName="open_24">24 Open</mat-checkbox>
  
              </div>
            </div>
  
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="location-heading">
                <h6 class="fontcolor">Select Location</h6>
              </div>
            </div>
          </div>
          <div class="row" >
  
            <div class="col-md-4">
              <div class="contact-form" *ngIf="getStatelistResponses &&  getStatelistResponses.success">
                <select class="select-open" name="first" [(ngModel)]="selectedStateModel" (change)="poststateIdgetcitylist(selectedStateModel)"
                  formControlName="state_id">
                  <option [ngValue]="undefined" selected>Select States</option>
                  <option *ngFor="let getStatelistResponse of getStatelistResponses.success" [ngValue]="getStatelistResponse">
                    {{getStatelistResponse.state_name}}
                  </option>
                </select>
  
                <div class="errormesage" *ngIf="!listingForm.controls['state_id'].valid
                && listingForm.controls['state_id'].touched">
                  <p>*Fields Are Required</p>
                </div>
              </div>
            </div>
            <div class=" col-md-4 col-sm-4 col-xs-12">
              <div class="contact-form">
                <select class="select-open" name="first" *ngIf="selectcityhideshowFlag">
                  <option [ngValue]="undefined" selected>Select City</option>
                </select>
                <div *ngIf="getStatelistResponses &&  getStatelistResponses.success  && !selectcityhideshowFlag">
                  <select class="select-open" name="first" [(ngModel)]="selectedcityModel" (change)="postcitIdgetlocationlist(selectedcityModel)"
                    *ngIf="getcitylistResponses &&  getcitylistResponses.success " formControlName="city_id">
                    <option [ngValue]="undefined" selected>Select City</option>
                    <option *ngFor="let getcitylistResponse of getcitylistResponses.success" [ngValue]="getcitylistResponse">
                      {{getcitylistResponse.city_name}}
                    </option>
                  </select>
                </div>
                <div class="errormesage" *ngIf="!listingForm.controls['city_id'].valid
                && listingForm.controls['city_id'].touched">
                  <p>*Fields Are Required</p>
                </div>
              </div>
            </div>
            <div class=" col-sm-4 col-md-4">
              <div class="contact-form">
                <select class="select-open" name="first" *ngIf="selectlocationhideshowFlag">
                  <option [ngValue]="undefined" selected>Select Location</option>
                </select>
  
                <select class="select-open" name="first" [(ngModel)]="selectedlocationModel" (change)="getaddressvalue()"
                  *ngIf="getlocationlistResponses &&  getlocationlistResponses.success " formControlName="location_id">
                  <option [ngValue]="undefined" selected>Select Location</option>
                  <option *ngFor="let getlocationlistResponse of getlocationlistResponses.success" [ngValue]="getlocationlistResponse">
                    {{getlocationlistResponse.location_name}}
                  </option>
                </select>
  
                <div class="errormesage" *ngIf="!listingForm.controls['location_id'].valid
                && listingForm.controls['location_id'].touched">
                  <p>*Fields Are Required</p>
                </div>
              </div>
            </div>
  
          </div>
  
  
  
  
  <div class="row">
    <div class="col-md-12">
          <div class="location-map">
            <agm-map [latitude]="getlocationlatRespose" [longitude]="getlocationlongRespose"
              >
              <ng-container>
                <agm-marker [latitude]="getlocationlatRespose" [longitude]="getlocationlongRespose"
                [markerDraggable]="true" (dragEnd)="markerDragEnd( $event)"
               ></agm-marker>
  
              </ng-container>
            </agm-map>
  
          </div>
        </div>
        </div>
          <div class="row" *ngIf="otppasswordFlag">
            <div class="col-md-5">
              <div class="otppassword">
                <input type="text" class="contact_listing" placeholder="OTP Password" #otpMatced
                (change)="otpChecked(otpMatced.value)"  />
              </div>
            </div>
            <div class="col-md-3" *ngIf="resendOtpFlag">
              <div class="resendotp">
               <button type="button" class="resend_password"
               (click)= "showotppassword();hideresendButton()">Resend OTP</button>
              </div>
            </div>
  
          </div>
          <button type="button" class="next_button" 
          (click)="checkValidatyNextPage()">Next</button>
  
         
        </div>
       
  
        <!--First Step Forms Ends  here -->
  
  
  
  
  
  
  
        <!--Second Step Forms Starts  here -->
  
  
        <div class="seconstepform" *ngIf="multistepformflagstep2">
          <!-- <div class="row">
        <div class="  ui-md-12 ui-sm-12 ui-lg-12">
          <div class="station_information">
            <div class="station_heading">
              <h4>Station Information</h4>
            </div>
          </div>
        </div>
      </div> -->
          <div class="form_station">
  
  
            <!-- <div class="row">
          <div class="  col-sm-12 col-xs-12 ">
            <div class="form-group">
              <h6>Machine ID</h6>
              <input type="text" class="listingcontrol" placeholder="Enter Machine Id" />
            </div>
          </div>
        </div> -->
  
            <!-- <div class="row">
                  <div class="  ui-md-12 ui-sm-12 ui-lg-12">
                    <div class="Vehicle-type">
                      <h3>Vehicle type</h3>
                    </div>
                  </div>
                </div> -->
            <!-- <div class="row">
                  <div class=" col-sm-6 col-xs-12 col-md-6">
                    <label>
                      <input type="radio" name="solarpanel" value="offgrid" />
                      <i class="fa fa-car" style="font-size:24px; color: black"></i>
                      <p class="viecle-selected">offgrid</p>
                    </label>
                  </div>
  
  
                  <div class="col-md-6 col-sm-6 col-xs12">
                    <label>
                      <input type="radio" name="solarpanel" value="offgrid" />
                      <i class="fa fa-car" style="font-size:24px; color: black"></i>
                      <p class="viecle-selected">offgrid</p>
                    </label>
                  </div>
                </div> -->
            <!-- <div class="row">
                  <div class=" col-sm-2 col-md-2 col-xs-12">
                    <div class="battery_type">
                      <p class="form_heading">
                        Battery Type</p>
                      <select class="select-open" name="first">
                        <option *ngFor="let o of options">
                          {{o.name}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class=" col-md-2 col-sm-2 col-xs-12">
                    <div class="battery_type">
                      <p class="form_heading">
                        Vehical Type</p>
                      <select class="select-open" name="first">
                        <option *ngFor="let o of options">
                          {{o.name}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="  col-sm-2 col-md-2 col-xs-12">
                    <div class="battery_type">
                      <p class="form_heading">
                        Minutes</p>
                      <input type="text" class="stationcontrol" placeholder="Enter Business Name" />
                    </div>
                  </div>
                  <div class=" col-md-2 col-xs-12 col-sm-2">
                    <div class="battery_type">
                      <p class="form_heading">
                        Price </p>
                      <input type="text" class="stationcontrol" placeholder="Enter Business Name" />
  
                    </div>
                  </div>
                  <div class=" col-md-2 col-xs-12 col-lg-2">
                    <div class="battery_type">
                      <p class="form_heading">
                        Full charge</p>
                      <input type="checkbox" class="checkboxclass stationcontrol" />
  
                    </div>
                  </div>
                  <div class=" col-md-2 col-sm-2 col-xs-12">
                    <div class="battery_type">
                      <p class="submit_heading">
                      </p>
                      <button type="submit" value="Submit" class="submit_buton">Submit</button>
  
                    </div>
                  </div>
                </div> -->
            <!-- <div class="row">
                  <div class=" col-md-4 col-xs-12 col-sm-4">
                    <p class="form_heading"></p>
                    <input type="text" class="stationcontrol" placeholder="Optional" />
                  </div>
                </div> -->
            <!-- <div class="row ">
                  <div class=" col-xs-12 col-sm-4 col-md-4 ">
                    <div class="bams_heading">
                      <p>BAHMS</p>
                    </div>
                  </div>
                  <div class=" col-sm-4 col-md-4 col-xs-12">
                    <div class="yes ">
  
                      <input type="radio" name="solarpanel" value="offgrid" class="form-top" />
                    </div>
                  </div>
                  <div class=" col-sm-4 col-md-4 col-xs-12">
                    <div class="no">
                      <input type="radio" name="solarpanel" value="offgrid" class="form-top" />
                    </div>
                  </div>
  
                </div>
               -->
            <div class="row ">
              <div class=" col-md-12 ">
                <div class="amenities_heading">
  
                  <h6>Amenities</h6>
                </div>
  
              </div>
            </div>
            <div class="row " *ngIf="aminitiehttpResponse && aminitiehttpResponse.success">
                <div class="col-md-2 col-xs-12 col-sm-2 " *ngFor="let aminitie of aminitiehttpResponse.success">
    
                  <label>
    
                    <input type="checkbox"  
                    (change)="aminiiesSelected(aminitie.amenity_id, $event.target.checked)"
                    />
                    
                    <div class="amenities " >
        
                      <i class="{{aminitie.amenity_icon}}" style="font-size:24px; color: #de1515"></i>
                      &nbsp; {{aminitie.amenity_name}}
                    </div>
                  </label>
        
    
                </div>
    
    
    
              </div>
    
  
  
          </div>
          <div class="row ">
            <div class=" col-md-12 col-sm-12  ">
              <div class="contact-form">
                <textarea rows="4" cols="50" class="contact_listing" placeholder="Add Bussiness Description"
                  formControlName="business_description">
  
                      </textarea>
  
                <div class="errormesage" *ngIf="!listingForm.controls['business_description'].valid
                      && listingForm.controls['business_description'].touched">
                  <p>*Fields Required</p>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="businesss_id">
          <input  type="hidden" formControlName="business_type_id" >
        </div>
        
          <input  type="hidden" formControlName="business_user_id" >
          <input  type="hidden" formControlName="latitude" >
          <input  type="hidden" formControlName="longitude" >
      
          <div class="row ">
            <div class=" col-md-12 col-sm-12  ">
              <h4 class="business_photo">Business Photos</h4>
              <mat-card class="mat_card" *ngIf="dummyImageflag">
                <img src="assets/ima.png" />
              </mat-card>
              <div id="fileupload">
                business_image
                <ul class="selected_imagethumnail">
                  <li *ngFor="let url of urls;let i = index"
                  ><i class="fa fa-close"></i> <img [src]="url" class="rounded mb-3 seletedImageRemove"
                    (click)="removeImage(i)">
                  </li>
                </ul>
                <div class="inputWrapper" style="height: 48px; width: 96px;">
                    Upload File
                   
  
                <input type="file" id="file" 
                class="fileInput hidden" multiple (change)="getFileDetails($event)" accept="image/*" 
                  style="margin: 8px;  
                    padding: 8px 5px;
                    color: #333;
                    width: auto;
                    cursor: pointer;" #multipleImagesFileInputRefVar>
              
  </div>
              </div>
            </div>
          </div>
  
          <div class="row ">
            <div class=" col-md-9 col-sm-12 col-lg-9 ">
              <div class="previous-button">
                <button type="button" class="button-previous" (click)="previousstepform2()">
                  previous
                </button>
              </div>
            </div>
            <div class=" col-md-3 col-sm-12 col-lg-3 ">
              <div class="finish-button">
                <button type="submit" class="buttonfinish"
               >
  
  
                  Finsh
                </button>
              </div>
            </div>
          </div>
  
        </div>
  
  
  
  
  
   
  
    <!--Second Step Forms Ends  here -->
  
  
  
  
  
    </form>
  </div>
  </div>